{% extends "shop/base.html" %}
{% block content %}
	<div class="card mt-4">
		<div class="card-body">
			<div class="media">
					<img class="img-thumbnail" src="{{ object.image.url }}">
			</div>
			<h5 class="card-title">{{ object.title }}</h5>
			<h6 class="card-subtitle text-muted">{{ object.author }} | PHP {{ object.price }} | {{ object.genre }} </h6>
			<br>
			<p class="card-text"> {{ object.synopsis }}  </p>
			<p class="text-muted"> Published by {{ object.publisher }} on {{ object.publicationDate|date:"F d, Y" }}</p>
			<small class="text-muted"> Posted by <a href="{% url 'user-books' object.seller.username %}">{{ book.seller }}</a> on {{ object.timestamp|date:"F d, Y" }}</small>
		</div>
		<div class="mx-3 mb-3">
			{% if object.seller == user %}
				<a class="btn btn-secondary btn-sm" href="{% url 'book-update' object.id %}">Edit</a>


				<button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteModal">
				  Delete
				</button>

				<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
				  <div class="modal-dialog" role="document">
				    <div class="modal-content">
				      <div class="modal-body">
				        Are you sure you want to delete this listing?
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				        <form id='book-delete' method="POST" action="{% url 'book-delete' object.id %}">
							{% csrf_token %}
							<a href="{% url 'book-delete' object.id %}">
							<button  class="btn btn-danger" onClick="deleteFunction()">Delete</button>
							</a>
						</form>
				      </div>
				    </div>
				  </div>
				</div>

				

			{% else %}
				<a class="btn btn-primary btn-sm" href="#">Shop</a>
			{% endif %}
		</div>
	</div>
<script>
 	function deleteFunction(e) {
 		$('#book-delete').submit();
    }
</script>
{% endblock content %}
